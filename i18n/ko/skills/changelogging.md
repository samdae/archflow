---
name: Changelogging
description: changelog 작성 전담. Triggers on "changelogging", "changelog 작성", "변경 기록". bugfix 완료 후 호출되거나 수동 호출.
version: 1.0.0
---

# Changelogging Workflow

버그 수정, 분석 결과, 변경 사항을 changelog.md에 기록합니다.

## 💡 권장 모델

**Sonnet** (문서 작성)

## 🔄 도구 폴백 (Fallback)

| 도구 | 없을 때 대체 방법 |
|------|-----------------|
| **Read** | 사용자에게 기존 changelog 내용 복사 요청 |
| **AskQuestion** | "다음 중 선택해주세요" 형태로 질문 |

## 📁 문서 구조

```
projectRoot/
  └── docs/
        └── {serviceName}/
              └── changelog.md   # ← 이 스킬의 출력
```

## ⚠️ 호출 시점

1. **bugfix 스킬에서 자동 호출** - 분석/수정 완료 후
2. **사용자 수동 호출** - bugfix에서 호출 안 됐을 때, 또는 독립적으로 기록할 때

---

## Phase 0: 스킬 진입

### 0-1. 컨텍스트 확인

**bugfix 세션에서 호출된 경우:**
> 이전 대화의 컨텍스트(원인, 수정 내용 등)를 그대로 사용

**독립적으로 호출된 경우:**
```json
{
  "title": "Changelog 작성",
  "questions": [
    {
      "id": "has_context",
      "prompt": "기록할 내용이 있나요?",
      "options": [
        {"id": "bugfix", "label": "버그 수정 결과 - 이 세션에서 분석/수정했어요"},
        {"id": "manual", "label": "수동 기록 - 직접 설명할게요"}
      ]
    }
  ]
}
```

### 0-2. serviceName 확인

```json
{
  "title": "서비스 확인",
  "questions": [
    {
      "id": "service_name",
      "prompt": "어떤 서비스의 changelog에 기록할까요?",
      "options": [
        {"id": "input", "label": "서비스명 알려드릴게요"}
      ]
    }
  ]
}
```

---

## Phase 1: 결과 유형 분류

### 1-1. 결과 유형 확인

```json
{
  "title": "결과 유형",
  "questions": [
    {
      "id": "result_type",
      "prompt": "어떤 결과를 기록하나요?",
      "options": [
        {"id": "fix_complete", "label": "코드 수정 완료 - 버그를 수정했어요"},
        {"id": "external_cause", "label": "외부 원인 파악 - 내 코드 문제 아님"},
        {"id": "investigation", "label": "조사 결과 기록 - 원인 파악 중/실패"},
        {"id": "other", "label": "기타 변경 사항"}
      ]
    }
  ]
}
```

---

## Phase 2: 정보 수집

### 2-1. 컨텍스트에서 추출 (bugfix 세션)

이전 대화에서 다음 정보 추출:
- 증상 (사용자가 보고한 문제)
- 원인 (분석 결과)
- 수정 내용 (있는 경우)
- 영향 범위

### 2-2. 수동 입력 (독립 호출)

> "다음 정보를 알려주세요:
> 1. 증상 (무슨 문제였나요?)
> 2. 원인 (왜 발생했나요?)
> 3. 조치 (어떻게 해결했나요? 또는 해결 방안)
> 4. 영향 범위 (어떤 기능/파일에 영향?)"

### 2-3. 설계 영향 확인

```json
{
  "title": "설계 영향",
  "questions": [
    {
      "id": "design_impact",
      "prompt": "이 변경이 설계(architect.md)에 영향을 주나요?",
      "options": [
        {"id": "yes", "label": "있음 - API/DB/구조 변경"},
        {"id": "no", "label": "없음 - 버그 수정만"},
        {"id": "unsure", "label": "모르겠음"}
      ]
    }
  ]
}
```

- `yes` → 설계 영향 상세 섹션 작성 + architect-sync 안내
- `no` → 설계 영향 없음으로 표시

---

## Phase 3: changelog 작성

### 3-1. 기존 changelog 확인

- 있으면 → 상단에 새 항목 추가
- 없으면 → 새로 생성

### 3-2. 템플릿

```markdown
# 변경 로그 (Changelog)

## {날짜} - {결과 유형}

### 기본 정보
| 항목 | 내용 |
|------|------|
| 증상 | {사용자가 보고한 증상} |
| 원인 | {특정된 원인} |
| 심각도 | Critical / High / Medium / Low |
| **설계 영향** | **있음 / 없음** |

### 설계 영향 상세 (있음인 경우만 작성)
| 영향 받은 섹션 | 변경 내용 |
|--------------|----------|
| Code Mapping | {메서드 추가/변경/삭제 - 해당 시} |
| API Spec | {엔드포인트 변경 - 해당 시} |
| DB Schema | {테이블/컬럼 변경 - 해당 시} |
| Sequence Diagram | {흐름 변경 - 해당 시} |

⚠️ **설계 영향 있음 시**: `architect-sync` 스킬로 architect.md 동기화 필요

### 변경 이유
- **왜 이 문제가 발생했는가**: {근본 원인 분석}
- **왜 이 방식으로 조치했는가**: {조치 방식 선택 이유}

### 조치 내용
| 파일 | 변경 내용 | 변경 유형 |
|------|----------|----------|
| {파일 경로} | {변경 설명} | 수정/추가/삭제/없음 |

### 영향 범위
- **직접 영향**: {수정된 기능/API}
- **간접 영향**: {이 수정으로 영향받을 수 있는 다른 기능}
- **영향 없음 확인**: {변경이 영향주지 않는다고 확인한 부분}

### 검증 방법
| 검증 항목 | 방법 | 예상 결과 |
|----------|------|----------|
| 문제 해결 확인 | {테스트 방법} | {정상 동작} |
| 회귀 테스트 | {관련 기능 테스트} | {기존 기능 정상} |

### 관련 문서
- 요구사항: docs/{serviceName}/requirements.md
- 설계: docs/{serviceName}/architect.md

---

(이전 변경 로그...)
```

### 3-3. 결과 유형별 조정

**코드 수정 완료:**
- 조치 내용에 실제 변경 파일/내용 기록

**외부 원인 파악:**
- 조치 내용: "코드 수정 없음 - 외부 원인"
- 변경 이유에 외부 원인 상세 기록
- 권장 조치 (외부팀 연락, 설정 변경 등) 추가

**조사 결과 기록:**
- 심각도: "조사 중"
- 조치 내용: "조사 진행 중" 또는 "원인 파악 실패"
- 다음 단계 기록

---

## Phase 4: 저장 및 완료

### 4-1. 저장

```
docs/{serviceName}/changelog.md
```

### 4-2. 완료 보고

```markdown
## Changelog 작성 완료

### 요약
| 항목 | 내용 |
|------|------|
| 서비스 | {serviceName} |
| 결과 유형 | {코드 수정/외부 원인/조사 기록} |
| 설계 영향 | 있음 / 없음 |

### 파일
- 업데이트됨: `docs/{serviceName}/changelog.md`

### 다음 단계
- **설계 영향 있음 시**: `architect-sync` 스킬 실행
- **테스트 필요 시**: 검증 방법대로 테스트 진행
```

---

# 연계

```
[bugfix] → 분석/수정 완료
              │
              ▼
        [changelogging] → changelog.md 작성
              │
              ▼ (설계 영향 있을 때)
        [architect-sync] → architect.md 동기화
```

---

# 주의사항

1. **같은 세션에서 호출 권장**
   - bugfix 컨텍스트가 있어야 자동 추출 가능
   - 다른 세션이면 수동 입력 필요

2. **설계 영향 판단**
   - API/DB/구조 변경 → 있음
   - 단순 버그 수정 (로직만) → 없음
   - 애매하면 "있음"으로 처리 (안전)

3. **외부 원인도 기록 가치 있음**
   - "우리 코드 문제 아님"도 중요한 정보
   - 나중에 같은 문제 발생 시 참고
